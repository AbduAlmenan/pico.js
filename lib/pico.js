this.PICO=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(1);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Object.assign({shiftfactor:.1,scalefactor:1.1,initialsize:.1,rotation:0,threshold:.2,memory:1},e),this._clfn=function(){return-1},this._mu=(0,a.getMemoryUpdater)(this.options.memory)}return n(t,[{key:"loadCascade",value:function(t){var e=this;return fetch(t).then(function(t){return t.arrayBuffer().then(function(t){var r=new Int8Array(t);e._clfn=(0,a.unpackCascade)(r)})})}},{key:"detect",value:function(t){var e=t.data,r=t.width,n=t.height,o=(0,a.grayscale)(e,r,n),i=this.options.shiftfactor,u=this.options.scalefactor,f=this.options.initialsize*Math.sqrt(r*n)|0,s=this.options.rotation,c=this.options.threshold,l=(0,a.runCascade)(o,r,n,this._clfn,i,u,f,s);return l=this._mu(l),l=(0,a.clusterDetections)(l,c)}}]),t}();e.default=o},function(t,e,r){"use strict";function n(t,e){var r=t[0],n=t[1],a=t[2],o=e[0],i=e[1],u=e[2],f=Math.max(0,Math.min(r+a/2,o+u/2)-Math.max(r-a/2,o-u/2)),s=Math.max(0,Math.min(n+a/2,i+u/2)-Math.max(n-a/2,i-u/2)),c=Math.min(a,u);return f*s/(c*c)}Object.defineProperty(e,"__esModule",{value:!0}),e.grayscale=function(t,e,r,n){var a=t.length>>2,o=n?new Uint32Array(a):new Uint8Array(a),i=new Uint32Array(t.buffer||new Uint8Array(t).buffer),u=0,f=0,s=0;if(n)for(;u<a;)f=i[u],s=13933*(f>>>16&255)+46871*(f>>>8&255)+4732*(255&f)>>>16,o[u++]=65793*s|4278190080&f;else for(;u<a;)f=i[u],s=13933*(f>>>16&255)+46871*(f>>>8&255)+4732*(255&f)>>>16,o[u++]=s;return new Uint8ClampedArray(o.buffer)},e.unpackCascade=function(t){var e=new DataView(new ArrayBuffer(4)),r=8;e.setUint8(0,t[r+0]),e.setUint8(1,t[r+1]),e.setUint8(2,t[r+2]),e.setUint8(3,t[r+3]);var n=e.getInt32(0,!0),a=Math.pow(2,n)>>0;r+=4,e.setUint8(0,t[r+0]),e.setUint8(1,t[r+1]),e.setUint8(2,t[r+2]),e.setUint8(3,t[r+3]);var o=e.getInt32(0,!0);r+=4;for(var i=[],u=[],f=[],s=0;s<o;++s){var c;for(Array.prototype.push.apply(i,[0,0,0,0]),Array.prototype.push.apply(i,t.slice(r,r+4*Math.pow(2,n)-4)),r=r+4*Math.pow(2,n)-4,c=0;c<Math.pow(2,n);++c)e.setUint8(0,t[r+0]),e.setUint8(1,t[r+1]),e.setUint8(2,t[r+2]),e.setUint8(3,t[r+3]),u.push(e.getFloat32(0,!0)),r+=4;e.setUint8(0,t[r+0]),e.setUint8(1,t[r+1]),e.setUint8(2,t[r+2]),e.setUint8(3,t[r+3]),f.push(e.getFloat32(0,!0)),r+=4}for(var l=[],h=[],p=0;p<360;p++){var v=p*Math.PI/180;l[p]=256*Math.cos(v),h[p]=256*Math.sin(v)}return function(t,e,r,s,c,p){t<<=16,e<<=16;for(var v=0,y=0,d=s*h[r|=0],g=s*l[r],m=0;m<o;++m){for(var b=1,M=0;M<n;++M){var U=v+4*b,w=i[U+0],_=i[U+1],O=i[U+2],j=i[U+3],x=t+g*w-d*_>>16,P=e+d*w+g*_>>16,A=t+g*O-d*j>>16,C=e+d*O+g*j>>16;b=2*b+(c[x*p+P]<=c[A*p+C])}if((y+=u[a*m+b-a])<=f[m])return-1;v+=4*a}return y-f[o-1]}},e.runCascade=function(t,e,r,n,a,o,i,u){u=u?[].concat(u):[0];var f=Math.max(e,r),s=[];for(;i<=f;){for(var c=a*i+1>>0,l=i/2+1>>0,h=l;h<=r-l;h+=c)for(var p=l;p<=e-l;p+=c)for(var v=0;v<u.length;v++){var y=u[v],d=n(h,p,y,i,t,e);d>0&&s.push([h,p,i,d,y])}i*=o}return s},e.calcOverlap=n,e.clusterDetections=function(t,e){t.sort(function(t,e){return e[3]-t[3]});for(var r=[],a=[],o=0;o<t.length;o++)if(!r[o]){for(var i=t[o][0],u=t[o][1],f=t[o][2],s=t[o][3],c=t[o][4],l=1,h=o+1;h<t.length;h++)r[h]||n(t[o],t[h])>e&&(r[h]=!0,i+=t[h][0],u+=t[h][1],f+=t[h][2],s+=t[h][3],l++);a.push({r:i/l,c:u/l,s:f/l,q:s,a:c})}return a},e.getMemoryUpdater=function(t){for(var e=0,r=[],n=0;n<t;++n)r.push([]);return function(t){r[e]=t,e=(e+1)%r.length,t=[];for(var n=0;n<r.length;++n)t=t.concat(r[n]);return t}}}]).default;